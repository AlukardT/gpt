databases:
- name: mafia-postgres
  databaseName: mafia
  user: mafia

services:
- type: web
  name: mafia-bot-web
  runtime: node
  plan: free
  buildCommand: npm install --no-audit --no-fund
  startCommand: npm start
  autoDeploy: true
  envVars:
  - key: DATABASE_URL
    fromDatabase:
      name: mafia-postgres
      property: connectionString
  - key: ADMIN_TOKEN
    value: admin-secret
  - key: BOT_TOKEN_INTERNAL
    value: bot-secret
  - key: NODE_ENV
    value: production
  - key: PORT
    value: 10000
  - key: BOT_TOKEN
    sync: false
  - key: GOOGLE_CLOUD_PROJECT_ID
    sync: false
  - key: GOOGLE_CLOUD_PRIVATE_KEY_ID
    sync: false
  - key: GOOGLE_CLOUD_PRIVATE_KEY
    sync: false
  - key: GOOGLE_CLOUD_CLIENT_EMAIL
    sync: false
  - key: GOOGLE_CLOUD_CLIENT_ID
    sync: false
  - key: GOOGLE_CLOUD_AUTH_URI
    sync: false
  - key: GOOGLE_CLOUD_TOKEN_URI
    sync: false
  - key: GOOGLE_CLOUD_AUTH_PROVIDER_X509_CERT_URL
    sync: false
  - key: GOOGLE_CLOUD_CLIENT_X509_CERT_URL
    sync: false